# üö® –ö–†–ò–¢–ò–ß–ù–û: –ù—É–∂–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Bil24 API

## ‚ùå **–ü–†–û–ë–õ–ï–ú–ê:**
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** Bil24 API
- **–ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –±–∞–∑–æ–≤—ã–π URL** –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ù–µ–ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –æ —Ñ–æ—Ä–º–∞—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- Connection Test –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **400 Bad Request**

## üìã **–ß–¢–û –ò–ó–í–ï–°–¢–ù–û –ò–ó –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:**

### ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "locale": "en",
  "command": "GET_ALL_ACTIONS", 
  "fid": 2558,
  "token": "bf7404918fd2785b2178"
}
```

### ‚úÖ **–ú–µ—Ç–æ–¥:** `POST`
### ‚úÖ **Content-Type:** `application/json`
### ‚ùå **–ë–∞–∑–æ–≤—ã–π URL:** –ù–ï–ò–ó–í–ï–°–¢–ï–ù

---

## üîç **–®–ê–ì–ò –î–õ–Ø –†–ï–®–ï–ù–ò–Ø:**

### **1. –ù–∞–π–¥–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Bil24:**
- –°–≤—è–∂–∏—Ç–µ—Å—å —Å **–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Bil24**
- –ó–∞–ø—Ä–æ—Å–∏—Ç–µ **–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**
- –£–∑–Ω–∞–π—Ç–µ **–±–∞–∑–æ–≤—ã–π URL** –¥–ª—è API
- –ü–æ–ª—É—á–∏—Ç–µ **—Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥**

### **2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
- –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É Bil24
- –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **API/–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
- –ò—â–∏—Ç–µ **–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** –∏–ª–∏ **–ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞**

### **3. –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ DevTools:**
- –û—Ç–∫—Ä–æ–π—Ç–µ Bil24 –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ù–∞–∂–º–∏—Ç–µ **F12** ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Network**
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- –ù–∞–π–¥–∏—Ç–µ **—Ä–µ–∞–ª—å–Ω—ã–µ API –∑–∞–ø—Ä–æ—Å—ã**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **URL –∏ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö**

---

## üß™ **–ò–ù–°–¢–†–£–ú–ï–ù–¢–´ –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:**

### **1. –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä API** (`analyze-bil24-api.php`):
```bash
php analyze-bil24-api.php
```

### **2. –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ —Ñ–æ—Ä–º–∞—Ç–æ–≤** (`test-bil24-formats.php`):
```bash
php test-bil24-formats.php
```

### **3. –¢–µ—Å—Ç —á–µ—Ä–µ–∑ curl:**
```bash
curl -X POST "REAL_BIL24_URL" \
  -H "Content-Type: application/json" \
  -d '{
    "locale": "en",
    "command": "GET_ALL_ACTIONS",
    "fid": 2558,
    "token": "your_token"
  }'
```

---

## üìû **–ö–û–ù–¢–ê–ö–¢–´ –î–õ–Ø –ü–û–õ–£–ß–ï–ù–ò–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò:**

### **–í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–≤—è–∑–∏ —Å Bil24:**
- üåê **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç:** bil24.com (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- üìß **Email –ø–æ–¥–¥–µ—Ä–∂–∫–∏:** support@bil24.com
- üìû **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞:** –Ω–∞–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
- üí¨ **–ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏:** –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

### **–ß—Ç–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å:**
```
–¢–µ–º–∞: –ù—É–∂–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!

–†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å WordPress –∏ –Ω—É–∂–Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

1. –ë–∞–∑–æ–≤—ã–π URL –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
2. –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ (GET_ALL_ACTIONS, GET_EVENTS, etc.)
3. –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
4. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
5. –ö–æ–¥—ã –æ—à–∏–±–æ–∫ –∏ –∏—Ö –æ–ø–∏—Å–∞–Ω–∏–µ

–¢–µ–∫—É—â–∏–π —Ñ–æ—Ä–º–∞—Ç (—Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏?):
POST {URL}
Content-Type: application/json
{
  "locale": "en",
  "command": "GET_ALL_ACTIONS",
  "fid": 2558,
  "token": "token_here"
}

–°–ø–∞—Å–∏–±–æ!
```

---

## üîß **–í–†–ï–ú–ï–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï:**

–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –º–æ–∂–Ω–æ:

### **1. –û–±–Ω–æ–≤–∏—Ç—å `Client.php`:**
```php
// –í execute_command() –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –æ—Ç–ª–∞–¥–∫–∏
public function execute_command( string $command, array $params = [] ): array {
    $url = $this->get_api_base_url(); // –ù–£–ñ–ï–ù –ü–†–ê–í–ò–õ–¨–ù–´–ô URL!
    
    $data = [
        'locale' => 'en',
        'command' => $command,
        'fid' => (int) $this->settings['fid'],
        'token' => $this->settings['token']
    ];
    
    Utils::log("üîç Testing Bil24 URL: {$url}", Constants::LOG_LEVEL_DEBUG);
    Utils::log("üîç Request data: " . wp_json_encode($data), Constants::LOG_LEVEL_DEBUG);
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
}
```

### **2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ URL:**
```php
private function get_possible_api_urls(): array {
    return [
        'https://api.bil24.com',
        'https://bil24.com/api',
        'https://api.bil24.ru', 
        'https://bil24.ru/api',
        // –î–æ–±–∞–≤—å—Ç–µ URL –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    ];
}
```

---

## ‚ö†Ô∏è **–í–ê–ñ–ù–û:**

**–ë–ï–ó –ü–†–ê–í–ò–õ–¨–ù–û–ô –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò –ù–ï–í–û–ó–ú–û–ñ–ù–û:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å Connection Test
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö  
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫
- ‚úÖ –û–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É

**–ü–†–ò–û–†–ò–¢–ï–¢ #1:** –ü–æ–ª—É—á–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Bil24 API!

---

## üìà **–ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô:**

1. **[–°–†–û–ß–ù–û]** –°–≤—è–∑–∞—Ç—å—Å—è —Å Bil24 ‚Üí –ø–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
2. **[–°–†–û–ß–ù–û]** –ù–∞–π—Ç–∏ —Ä–µ–∞–ª—å–Ω—ã–π –±–∞–∑–æ–≤—ã–π URL API
3. –û–±–Ω–æ–≤–∏—Ç—å `Client.php` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ endpoints
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
5. –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
6. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

**–ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥!** üöÄ
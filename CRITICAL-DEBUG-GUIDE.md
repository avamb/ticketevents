# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–¢–õ–ê–î–ö–ê: Connection Test Error

## –ü—Ä–æ–±–ª–µ–º–∞
JavaScript –æ—à–∏–±–∫–∞: `Cannot read properties of undefined (reading 'message')`

## üîç –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. JavaScript Error Handling
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞** `error.message` –Ω–∞ undefined
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ browser console  
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞** non-JSON –æ—Ç–≤–µ—Ç–æ–≤

### 2. AJAX Handler Bulletproofing
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤** Constants, Utils, Client
- ‚úÖ **–û–±–µ—Ä–Ω—É—Ç–æ –≤ try-catch** —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω Throwable catch** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ PHP
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤** –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π

### 3. Debug Tools Created
- ‚úÖ `test-ajax-handler.php` - —Ç–µ—Å—Ç AJAX handler –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ WordPress debug.log
- ‚úÖ Console.log –æ—Ç–ª–∞–¥–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## üöÄ –ü–õ–ê–ù –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Browser DevTools
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí Bil24 Connector**
2. –û—Ç–∫—Ä–æ–π—Ç–µ **F12 ‚Üí Console**
3. –ö–ª–∏–∫–Ω–∏—Ç–µ **"Test Connection"**
4. –°–º–æ—Ç—Ä–∏—Ç–µ console.log —Å–æ–æ–±—â–µ–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏:**
```
Response status: 200
Response headers: Headers { ... }
JSON Response: { success: true/false, data: { message: "..." } }
Processing data: { ... }
Final success: true/false message: "..."
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network Tab
1. **F12 ‚Üí Network**
2. –ö–ª–∏–∫–Ω–∏—Ç–µ **"Test Connection"**
3. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ **admin-ajax.php**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - **Status Code** (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200)
   - **Response** (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π JSON)

### –®–∞–≥ 3: –¢–µ—Å—Ç AJAX Handler –ù–∞–ø—Ä—è–º—É—é
–û—Ç–∫—Ä–æ–π—Ç–µ: `yoursite.com/wp-content/plugins/bil24-connector/test-ajax-handler.php`

–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ª–∏ –∫–ª–∞—Å—Å—ã
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –º–µ—Ç–æ–¥ ajax_test_connection
- ‚úÖ –ï—Å—Ç—å –ª–∏ PHP –æ—à–∏–±–∫–∏

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Debug Logs
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ `wp-config.php`:
   ```php
   define('WP_DEBUG', true);
   define('WP_DEBUG_LOG', true);
   ```
2. –°–º–æ—Ç—Ä–∏—Ç–µ `wp-content/debug.log`
3. –ò—â–∏—Ç–µ –∑–∞–ø–∏—Å–∏ —Å `[Bil24]`

## üîß –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´ –ò –†–ï–®–ï–ù–ò–Ø

### 1. –ö–ª–∞—Å—Å API Client –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã:** PHP Fatal error –≤ –ª–æ–≥–∞—Ö
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `includes/Api/Client.php` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### 2. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ PHP
**–°–∏–º–ø—Ç–æ–º—ã:** –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –∏–ª–∏ HTML –≤–º–µ—Å—Ç–æ JSON  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ syntax errors –≤ —Ñ–∞–π–ª–∞—Ö –∫–ª–∞—Å—Å–æ–≤

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ FID/Token
**–°–∏–º–ø—Ç–æ–º—ã:** JSON –æ—Ç–≤–µ—Ç —Å success: false
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials –≤ –∞–¥–º–∏–Ω–∫–µ

### 4. –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞ –∫ Bil24 API
**–°–∏–º–ø—Ç–æ–º—ã:** Connection timeout –≤ –ª–æ–≥–∞—Ö
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å api.bil24.pro:1240

### 5. WordPress nonce –ø—Ä–æ–±–ª–µ–º–∞
**–°–∏–º–ø—Ç–æ–º—ã:** "Nonce verification failed"
**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–¥–º–∏–Ω–∫–∏

## üìã –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ï –ö–û–ú–ê–ù–î–´

### Console Commands (–≤ –±—Ä–∞—É–∑–µ—Ä–µ)
```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ ajaxurl –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
console.log('ajaxurl:', ajaxurl);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å nonce
console.log('nonce:', <?php echo wp_json_encode( wp_create_nonce( 'bil24_test_connection' ) ); ?>);
```

### Test URLs
- **Settings Page:** `wp-admin/options-general.php?page=bil24-connector`
- **AJAX Test:** `test-ajax-handler.php`
- **Format Test:** `test-bil24-format.php`

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–°–Ω–∞—á–∞–ª–∞:** –û—Ç–∫—Ä–æ–π—Ç–µ DevTools Console –∏ –∫–ª–∏–∫–Ω–∏—Ç–µ Test Connection
2. **–ï—Å–ª–∏ –æ—à–∏–±–∫–∏ JS:** –ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ console.log –≤—ã–≤–æ–¥
3. **–ï—Å–ª–∏ Network –æ—à–∏–±–∫–∏:** –ü–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ Response –≤ Network tab  
4. **–ï—Å–ª–∏ PHP –æ—à–∏–±–∫–∏:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ test-ajax-handler.php
5. **–ï—Å–ª–∏ –≤—Å–µ –û–ö:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials FID/Token

## üõ† –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, **–ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–ª–∞–≥–∏–Ω:**

1. –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–ª–∞–≥–∏–Ω –≤ –∞–¥–º–∏–Ω–∫–µ
2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–Ω–æ–≤–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Test Connection

---

**–° —ç—Ç–∏–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ –æ—à–∏–±–∫–∞ `undefined reading 'message'` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞!**
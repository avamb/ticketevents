# üîß –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Bil24 API Format

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê –û–ë–ù–ê–†–£–ñ–ï–ù–ê

**–ü–ª–∞–≥–∏–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª –∑–∞–ø—Ä–æ—Å—ã –∫ Bil24 API!**

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–∞–Ω–µ–µ):
```http
GET /status HTTP/1.1
Host: api.bil24.pro:1240
Authorization: Bearer bf7404918fd2785b2178
X-FID: 2558
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Bil24:
```http
POST / HTTP/1.1 
Host: api.bil24.pro:1240
Content-Type: application/json

{
  "locale": "en",
  "command": "GET_ALL_ACTIONS", 
  "fid": 2558,
  "token": "bf7404918fd2785b2178"
}
```

## üî• –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (`includes/Api/Client.php`)
- ‚úÖ **–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:** `execute_command()` - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º JSON —Ñ–æ—Ä–º–∞—Ç–µ
- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** FID –∏ Token —Ç–µ–ø–µ—Ä—å –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞, –Ω–µ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
- ‚úÖ **–ö–æ–º–∞–Ω–¥—ã:** –ò—Å–ø–æ–ª—å–∑—É–µ–º Bil24 –∫–æ–º–∞–Ω–¥—ã –≤–º–µ—Å—Ç–æ REST endpoints
- ‚úÖ **URL:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ –±–∞–∑–æ–≤—ã–π URL –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π

### 2. –ö–æ–º–∞–Ω–¥—ã Bil24 –≤–º–µ—Å—Ç–æ REST endpoints
```php
// –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥
$api->get('/status');
$api->get('/events'); 

// –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥  
$api->execute_command('GET_ALL_ACTIONS');
$api->execute_command('GET_EVENTS');
```

### 3. –ú–∞–ø–ø–∏–Ω–≥ –∫–æ–º–∞–Ω–¥
- `/status` ‚Üí `GET_ALL_ACTIONS`
- `/events` ‚Üí `GET_EVENTS` 
- `/orders` ‚Üí `GET_ORDERS`
- `/venues` ‚Üí `GET_VENUES`

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–∞–Ω–¥—É `GET_ALL_ACTIONS` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ Bil24
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Bil24

## üìã –ù–û–í–´–ï –§–ê–ô–õ–´

### `test-bil24-format.php` 
–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–∞
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—É `GET_ALL_ACTIONS`
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç API

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `test-api-connection.php`
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- –ü–æ–∫–∞–∑ –æ–∂–∏–¥–∞–µ–º–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## üöÄ –ö–ê–ö –¢–ï–°–¢–ò–†–û–í–ê–¢–¨

### 1. –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí Bil24 Connector
2. –í–≤–µ–¥–∏—Ç–µ FID –∏ Token  
3. –ù–∞–∂–º–∏—Ç–µ "Test Connection"
4. –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### 2. –ß–µ—Ä–µ–∑ –Ω–æ–≤—ã–π —Ç–µ—Å—Ç–µ—Ä
–û—Ç–∫—Ä–æ–π—Ç–µ: `yoursite.com/wp-content/plugins/bil24-connector/test-bil24-format.php`

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Network
–í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ:
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å POST –∑–∞–ø—Ä–æ—Å –Ω–∞ –±–∞–∑–æ–≤—ã–π API URL
- Content-Type: application/json
- Body —Å–æ–¥–µ—Ä–∂–∏—Ç: locale, command, fid, token

## üìä –°–¢–†–£–ö–¢–£–†–ê –ó–ê–ü–†–û–°–ê

### –ë–∞–∑–æ–≤—ã–µ URL
- **Test:** `https://api.bil24.pro:1240`
- **Production:** `https://api.bil24.pro`

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
```json
{
  "locale": "en",        // –Ø–∑—ã–∫ –æ—Ç–≤–µ—Ç–∞ (en/ru)
  "command": "...",      // –ö–æ–º–∞–Ω–¥–∞ Bil24
  "fid": 2558,          // Facility ID (—á–∏—Å–ª–æ)
  "token": "..."        // –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞
}
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `GET_ALL_ACTIONS` - –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- `GET_EVENTS` - –ø–æ–ª—É—á–∏—Ç—å —Å–æ–±—ã—Ç–∏—è
- `GET_ORDERS` - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã  
- `GET_VENUES` - –ø–æ–ª—É—á–∏—Ç—å –ø–ª–æ—â–∞–¥–∫–∏
- `CREATE_EVENT` - —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
- `UPDATE_EVENT` - –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú

### –ï—Å–ª–∏ —Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç:

1. **"API credentials not configured"**
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ FID –∏ Token –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
   
2. **"Network connection failed"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å api.bil24.pro
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 1240 –æ—Ç–∫—Ä—ã—Ç (–¥–ª—è test)
   
3. **"Authentication failed"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å FID –∏ Token
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ FID - —ç—Ç–æ —á–∏—Å–ª–æ
   
4. **"Bil24 API error: ..."**
   - –°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ—à–∏–±–∫—É –æ—Ç API
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Ç–æ–∫–µ–Ω–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º `WP_DEBUG` –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç:
```
[Bil24] [DEBUG] Executing Bil24 command: GET_ALL_ACTIONS with data: {"command":"GET_ALL_ACTIONS","fid":2558,"token":"bf7404918fd2785b2178","locale":"en"}
[Bil24] [INFO] Bil24 API connection test successful
```

## ‚ö° BACKWARDS COMPATIBILITY

–°—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã `get()`, `post()`, `put()`, `delete()` –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Ä–∞–±–æ—Ç–∞—é—Ç - –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Bil24.

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** —Å –Ω–æ–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫
3. **–û–±–Ω–æ–≤–∏—Ç–µ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏ –∫–æ–¥–∞** –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä—è–º—ã–µ API –≤—ã–∑–æ–≤—ã
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤–∞—à–µ–≥–æ Bil24 –∞–∫–∫–∞—É–Ω—Ç–∞

---

**–¢–µ–ø–µ—Ä—å –ø–ª–∞–≥–∏–Ω –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º Bil24 API! üéâ**